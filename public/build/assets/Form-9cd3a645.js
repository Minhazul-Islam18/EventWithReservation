import{q as p,r as l,j as t,y as d}from"./app-4ad4794e.js";import x from"./Mainlayout-dfa03863.js";import{u}from"./index.esm-8142d936.js";import"./ThemeConfig-49c8c6b2.js";import"./Footer-e1e57597.js";import"./Header-c41d7f19.js";import"./Dropdown-2581804f.js";import"./nonIterableRest-a431ed98.js";import"./Sidebar-8cc94a0d.js";import"./createReactComponent-470faa61.js";import"./FlashMessage-549d2d67.js";import"./sweetalert2.all-9daacd86.js";const b=()=>{const{event:e}=p().props||{},i=!!e,[o,m]=l.useState(!1),{register:a,handleSubmit:c,setValue:j,formState:{errors:s}}=u({defaultValues:{title:(e==null?void 0:e.title)||"",description:(e==null?void 0:e.description)||"",event_date:(e==null?void 0:e.event_date)||"",total_seats:(e==null?void 0:e.total_seats)||"",available_seats:(e==null?void 0:e.available_seats)||""}});l.useEffect(()=>{e!=null&&e.seats&&e.seats.some(r=>r.status==="booked")&&m(!0)},[e]);const n=r=>{i?d.put(`/admin/events/${e==null?void 0:e.id}/update`,r):d.post("/admin/events/store",r)};return t.jsxs("div",{className:"max-w-md mx-auto",children:[t.jsx("h1",{className:"text-2xl font-bold mb-6",children:i?"Edit Event":"Create Event"}),t.jsxs("form",{onSubmit:c(n),children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700",children:"Event Title"}),t.jsx("input",{type:"text",className:"w-full px-4 py-2 border rounded-lg",...a("title",{required:"Title is required"})}),s.title&&t.jsx("div",{className:"text-red-500",children:s.title.message})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700",children:"Description"}),t.jsx("textarea",{className:"w-full px-4 py-2 border rounded-lg",...a("description",{required:"Description is required"})}),s.description&&t.jsx("div",{className:"text-red-500",children:s.description.message})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700",children:"Event Date"}),t.jsx("input",{type:"date",className:"w-full px-4 py-2 border rounded-lg",...a("event_date",{required:"Event date is required"})}),s.event_date&&t.jsx("div",{className:"text-red-500",children:s.event_date.message})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-gray-700",children:"Total Seats"}),t.jsx("input",{type:"number",className:"w-full px-4 py-2 border rounded-lg",...a("total_seats",{required:"Total seats is required"}),disabled:o}),s.total_seats&&t.jsx("div",{className:"text-red-500",children:s.total_seats.message})]}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded-lg",children:i?"Update Event":"Create Event"})]})]})};b.layout=e=>t.jsx(x,{children:e,title:e.props.event?"Edit Event":"Create Event"});export{b as default};
